/*! For license information please see admin.js.LICENSE.txt */
(()=>{var t={281:(t,s,i)=>{"use strict";i(808)},808:(t,s,i)=>{"use strict";var a=i(865),o="function"==typeof Symbol&&Symbol.for;o&&Symbol.for("react.element"),o&&Symbol.for("react.portal"),o&&Symbol.for("react.fragment"),o&&Symbol.for("react.strict_mode"),o&&Symbol.for("react.profiler"),o&&Symbol.for("react.provider"),o&&Symbol.for("react.context"),o&&Symbol.for("react.forward_ref"),o&&Symbol.for("react.suspense"),o&&Symbol.for("react.memo"),o&&Symbol.for("react.lazy"),"function"==typeof Symbol&&Symbol.iterator;function e(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)s+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},r={};function l(t,s,i){this.props=t,this.context=s,this.refs=r,this.updater=i||n}function m(){}function d(t,s,i){this.props=t,this.context=s,this.refs=r,this.updater=i||n}l.prototype.isReactComponent={},l.prototype.setState=function(t,s){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error(e(85));this.updater.enqueueSetState(this,t,s,"setState")},l.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},m.prototype=l.prototype;var c=d.prototype=new m;c.constructor=d,a(c,l.prototype),c.isPureReactComponent=!0;Object.prototype.hasOwnProperty},865:t=>{"use strict";var s=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var s={},i=0;i<10;i++)s["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(s).map((function(t){return s[t]})).join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach((function(t){a[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(t){return!1}}()?Object.assign:function(t,o){for(var e,n,r=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),l=1;l<arguments.length;l++){for(var m in e=Object(arguments[l]))i.call(e,m)&&(r[m]=e[m]);if(s){n=s(e);for(var d=0;d<n.length;d++)a.call(e,n[d])&&(r[n[d]]=e[n[d]])}}return r}}},s={};function i(a){var o=s[a];if(void 0!==o)return o.exports;var e=s[a]={exports:{}};return t[a](e,e.exports,i),e.exports}i.n=t=>{var s=t&&t.__esModule?()=>t.default:()=>t;return i.d(s,{a:s}),s},i.d=(t,s)=>{for(var a in s)i.o(s,a)&&!i.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:s[a]})},i.o=(t,s)=>Object.prototype.hasOwnProperty.call(t,s),(()=>{"use strict";const t=flarum.core.compat["admin/app"];var s=i.n(t);function a(t,s){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,s){return t.__proto__=s,t},a(t,s)}function o(t,s){t.prototype=Object.create(s.prototype),t.prototype.constructor=t,a(t,s)}const e=flarum.core.compat["admin/components/ExtensionPage"];var n=i.n(e);const r=flarum.core.compat["common/components/Button"];var l=i.n(r);const d=flarum.core.compat["common/components/Modal"];var c=i.n(d);i(281);const u=flarum.core.compat["components/Modal"];var p=i.n(u);const h=flarum.core.compat["components/Button"];var g=i.n(h);const y=flarum.core.compat["common/utils/Stream"];var f=i.n(y);const b=flarum.core.compat["common/components/Switch"];var v=i.n(b);const x=flarum.core.compat["common/components/Select"];var D=i.n(x),w=function(t){function i(){for(var s,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(s=t.call.apply(t,[this].concat(a))||this).pageTitle="",s.moreResults=!1,s.iconList=[],s.method="POST",s.params={status:f()(1),code:f()(),title:f()(),desc:f()(),price:f()(0),stock:f()(0),discount:f()(0),discountLimit:f()(0),discountLimitUnit:f()("days"),type:f()("permanent"),outtime:f()(0),icon:f()(),hide:f()(0),repeat:f()(1),autoDeduction:f()(0)},s}o(i,t);var a=i.prototype;return a.oninit=function(s){t.prototype.oninit.call(this,s),this.method="POST",this.moreResults=!1,this.params.code=f()(this.attrs.code||""),this.params.title=f()(this.attrs.title||""),this.pageTitle=this.attrs.title,this.attrs.storeData&&(this.method="PUT",this.params.id=f()(this.attrs.storeData.id),this.params.status=f()(this.attrs.storeData.status),this.params.code=f()(this.attrs.storeData.code),this.params.title=f()(this.attrs.storeData.title),this.params.desc=f()(this.attrs.storeData.desc),this.params.price=f()(this.attrs.storeData.price),this.params.stock=f()(-99==this.attrs.storeData.stock?0:this.attrs.storeData.stock),this.params.discount=f()(this.attrs.storeData.discount),this.params.discountLimit=f()(this.attrs.storeData.discountLimit),this.params.discountLimitUnit=f()(this.attrs.storeData.discountLimitUnit),this.params.type=f()(this.attrs.storeData.type),this.params.outtime=f()(this.attrs.storeData.outtime),this.params.icon=f()(this.attrs.storeData.icon),this.params.hide=f()(this.attrs.storeData.hide),this.params.repeat=f()(this.attrs.storeData.repeat),this.params.autoDeduction=f()(this.attrs.storeData.autoDeduction))},a.className=function(){return""},a.title=function(){return this.pageTitle},a.onModalReady=function(){var t=this,s=$(".Modal-close .Button");$(s).prop("id","storeCloseButton");var i=s.clone();$(i).prop("id","storeCloseIconButton"),$(i).css("display","none"),$(".Modal-close").append(i),$(i).on("click",(function(){t.closeIcon()}))},a.content=function(){var t=this;return m("div",{className:"Modal-body",oncreate:this.onModalReady.bind(this)},m("div",{className:"Form"},m("div",{id:"StoreGoods",className:"Form-group"},m("div",{style:"text-align: left;"},m("div",{class:"spacing",style:"display: flex; align-items: center;"},m("span",null,s().translator.trans("mattoid-store.admin.settings.goods-status")),m("span",{style:"margin-left: 15px;"},m(v(),{state:this.params.status(),onchange:function(s){t.params.status=f()(Number(s))}}," "))),m("div",{class:"spacing",style:"display: flex; align-items: center;"},m("span",null,s().translator.trans("mattoid-store.admin.settings.goods-code")),m("span",{style:"font-weight: normal; cursor: pointer; border-bottom: 2px dotted; margin-left: 15px;"}," ",this.params.code()," ")),m("div",{class:"spacing",style:"align-items: center;"},m("div",{className:""},s().translator.trans("mattoid-store.admin.settings.goods-title")),m("input",{required:!0,class:"FormControl",type:"text",bidi:this.params.title})),m("div",{class:"spacing",style:"align-items: center;"},m("div",{className:""},s().translator.trans("mattoid-store.admin.settings.goods-desc")),m("textarea",{class:"FormControl",bidi:this.params.desc})),m("div",{className:"spacing"},m("div",{style:"width: 60px; display: inline-block;"},s().translator.trans("mattoid-store.admin.settings.goods-price")),m("input",{required:!0,class:"FormControl",type:"number",step:"1",min:"0",style:"width: 195px; margin-left: 0px; display: inline-block;",bidi:this.params.price}),m("div",{style:"width: 60px; display: inline-block; margin-left: 26px;"},s().translator.trans("mattoid-store.admin.settings.goods-stock")),m("input",{required:!0,class:"FormControl",type:"number",step:"1",min:"0",style:"width: 195px; margin-left: 0px; display: inline-block;",bidi:this.params.stock})),m("div",{className:"spacing"},m("div",{style:"width: 60px; display: inline-block;"},s().translator.trans("mattoid-store.admin.settings.goods-discount")),m("input",{required:!0,class:"FormControl",type:"number",step:"1",min:"0",style:"width: 100px; margin-left: 0px; display: inline-block;",bidi:this.params.discount}),m("div",{style:"width: 60px; display: inline-block; margin-left: 26px;"},s().translator.trans("mattoid-store.admin.settings.goods-discount-limit")),m("input",{required:!0,class:"FormControl",type:"number",step:"1",min:"0",style:"width: 145px; margin-left: 0px; display: inline-block;",bidi:this.params.discountLimit}),m("div",{style:"width: 40px; display: inline-block; margin-left: 26px;"},s().translator.trans("mattoid-store.admin.settings.goods-discount-limit-unit")),D().component({options:{days:s().translator.trans("mattoid-store.lib.item-limit-unit-days"),hour:s().translator.trans("mattoid-store.lib.item-limit-unit-hour"),minute:s().translator.trans("mattoid-store.lib.item-limit-unit-minute"),second:s().translator.trans("mattoid-store.lib.item-limit-unit-second")},value:this.params.discountLimitUnit(),onchange:function(s){t.params.discountLimitUnit=f()(s)}})),m("div",{className:"spacing"},m("div",{style:"width: 60px; display: inline-block;"},s().translator.trans("mattoid-store.admin.settings.goods-type")),D().component({options:{permanent:s().translator.trans("mattoid-store.lib.item-type-permanent"),limit:s().translator.trans("mattoid-store.lib.item-type-limit")},value:this.params.type(),onchange:function(s){t.params.type=f()(s)}}),m("div",{style:"limit"===this.params.type()?"display:inline-block":"display: none"},m("div",{style:"width: 80px; display: inline-block; margin-left: 26px;"},s().translator.trans("mattoid-store.admin.settings.goods-outtime")),m("input",{required:!0,class:"FormControl",type:"number",style:"width: 200px; margin-left: 0px; display: inline-block;",bidi:this.params.outtime}),m("span",{style:"margin-left: 10px;"},s().translator.trans("mattoid-store.admin.settings.days")))),m("div",{className:"spacing",style:"limit"===this.params.type()?"display:inline-block":"display: none"},m("div",{style:"width: 200px; display: inline-block;"},m("span",null,s().translator.trans("mattoid-store.admin.settings.goods-auto-deduction")),m("span",{style:"margin-left: 15px;"},m(v(),{state:this.params.autoDeduction(),onchange:function(s){t.params.autoDeduction=f()(Number(s))}})))),m("div",{className:"spacing"},m("div",{className:""},s().translator.trans("mattoid-store.admin.settings.goods-icon")),m("div",{style:"position: relative;"},m("div",null,m("input",{id:"icon",required:!0,class:"FormControl",type:"text",bidi:this.params.icon})),m("div",{style:"margin-top: 5px; display: inline-block;"},m(g(),{className:"Button Button--primary",onclick:function(s){t.uploadIcon(s)}},s().translator.trans("mattoid-store.admin.settings.goods-upload-button"))),m("div",{style:"margin-top: 5px; display: inline-block; margin-left: 26px;"},m(g(),{className:"Button Button--primary",onclick:function(s){t.showIcon(s)}},s().translator.trans("mattoid-store.admin.settings.show-icon-button"))))),m("div",{className:"spacing",style:this.params.icon()?"":"display: none"},m("img",{className:"icon-size",src:this.params.icon(),style:this.params.icon()&&".webm"===this.params.icon().slice(-5)?"display: none":""}),m("video",{autoplay:!0,loop:!0,muted:!0,playsinline:!0,className:"icon-size",style:this.params.icon()&&".webm"===this.params.icon().slice(-5)?"":"display: none"},m("source",{src:this.params.icon(),type:"video/webm"}))),m("div",{className:"spacing"},m("div",{style:"width: 200px; display: inline-block;"},m(v(),{state:this.params.repeat(),onchange:function(s){t.params.repeat=f()(Number(s))}},s().translator.trans("mattoid-store.admin.settings.goods-repeat"))),m("div",{style:"width: 200px; display: inline-block; margin-left: 26px;"},m(v(),{state:this.params.hide(),onchange:function(s){t.params.hide=f()(Number(s))}},s().translator.trans("mattoid-store.admin.settings.goods-hide"))))),m("div",{className:"spacing center"},g().component({className:"Button Button--primary",type:"submit",loading:this.loading},this.params.id?s().translator.trans("mattoid-store.admin.settings.edit-store-goods"):s().translator.trans("mattoid-store.admin.settings.add-store-goods")))),m("div",{id:"StoreIcon",className:"Form-group",style:"display: none"},m("div",null,this.iconList.map((function(s){return m("div",{className:"icon-frame inlineBlock",onclick:function(){return t.selectIconItem(s.attributes.url)}},m("img",{className:"icon-size",src:s.attributes.url,style:s.attributes.url&&".webm"===s.attributes.url.slice(-5)?"display: none":""}),m("video",{autoplay:!0,loop:!0,muted:!0,playsinline:!0,className:"icon-size",style:s.attributes.url&&".webm"===s.attributes.url.slice(-5)?"":"display: none"},m("source",{src:s.attributes.url,type:"video/webm"})))}))),!this.loading&&0===this.iconList.length&&m("div",null,m("div",{style:"font-size:1.4em;color: var(--muted-more-color);text-align: center;line-height: 100px;"},s().translator.trans("mattoid-store.lib.list-empty"))),!this.loading&&this.hasMoreResults()&&m("div",{style:"text-align:center;padding:20px"},m(g(),{className:"Button Button--primary",disabled:this.loading,loading:this.loading,onclick:function(){return t.loadMore()}},s().translator.trans("mattoid-store.lib.list-load-more"))),this.loading&&m("div",{class:"DiscussionList"},m("div",{class:"DiscussionList-loadMore"},m("div",{"aria-label":"loading…",role:"status","data-size":"medium",class:"LoadingIndicator-container LoadingIndicator-container--block LoadingIndicator-container--medium"},m("div",{"aria-hidden":"true",class:"LoadingIndicator"})))))))},a.loadIconList=function(t){return void 0===t&&(t=0),this.loading=!0,s().store.find("/store/icon/list",{page:{offset:t}}).catch((function(){})).then(this.parseResults.bind(this))},a.parseResults=function(t){return this.moreResults=!!t.payload.links&&!!t.payload.links.next,[].push.apply(this.iconList,t.payload.data),this.loading=!1,m.redraw(),t},a.loadMore=function(){this.loading=!0,this.loadIconList(this.iconList.length)},a.hasMoreResults=function(){return this.moreResults},a.closeIcon=function(){this.pageTitle=this.attrs.title,$("#StoreGoods").css("display","block"),$("#storeCloseButton").css("display","block"),$("#StoreIcon").css("display","none"),$("#storeCloseIconButton").css("display","none"),m.redraw()},a.selectIconItem=function(t){this.pageTitle=this.attrs.title,$("#StoreGoods").css("display","block"),$("#storeCloseButton").css("display","block"),$("#StoreIcon").css("display","none"),$("#storeCloseIconButton").css("display","none"),this.params.icon(t)},a.showIcon=function(t){$("#StoreGoods").css("display","none"),$("#storeCloseButton").css("display","none"),$("#StoreIcon").css("display","block"),$("#storeCloseIconButton").css("display","block"),this.pageTitle=s().translator.trans("mattoid-store.admin.settings.show-icon-button"),this.iconList=[],this.loadIconList()},a.uploadIcon=function(t){var i=this;t.preventDefault(),$('<input type="file">').appendTo("body").hide().trigger("click").on("change",(function(t){var a=new FormData;a.append("file",t.target.files[0]),s().request({url:s().forum.attribute("apiUrl")+"/store/upload/icon",method:"POST",body:a}).then((function(t){i.params.icon=f()(t.data.attributes.path),i.loading=!1,m.redraw()}))}))},a.onsubmit=function(t){var i=this;t.preventDefault(),this.loading=!0,s().request({method:this.method,url:s().forum.attribute("apiUrl")+"/store/goods",body:this.params}).then((function(){return location.reload()}),(function(t){i.loading=!1,i.handleErrors(t)}))},i}(p()),N=function(t){function i(){for(var s,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(s=t.call.apply(t,[this].concat(a))||this).goodsList=[],s.moreResults=!1,s}o(i,t);var a=i.prototype;return a.oninit=function(s){t.prototype.oninit.call(this,s),this.loadResults()},a.title=function(){return s().translator.trans("mattoid-store.admin.settings.add-store-goods")},a.className=function(){return""},a.content=function(){var t=this;return m("div",null,this.goodsList.map((function(t,i){return m("div",{className:"storeItemContainer",style:"margin: 10px"},m("div",{className:"ExtensionPage-body"},m("div",{className:"ExtensionPage-settings FlarumBadgesPage",style:"margin-top: 10px"},m("div",{className:"container"},m("span",{className:"leftAligned",style:"padding: 8px"},t.attributes.name),m(l(),{className:"Button rightAligned",onclick:function(){s().modal.show(w,{code:t.attributes.code,title:t.attributes.name})}},s().translator.trans("mattoid-store.admin.settings.add-store-goods"))))))})),!this.loading&&0===this.goodsList.length&&m("div",null,m("div",{style:"font-size:1.4em;color: var(--muted-more-color);text-align: center;line-height: 100px;"},s().translator.trans("mattoid-store.lib.list-empty"))),!this.loading&&this.hasMoreResults()&&m("div",{style:"text-align:center;padding:20px"},m(l(),{className:"Button Button--primary",disabled:this.loading,loading:this.loading,onclick:function(){return t.loadMore()}},s().translator.trans("mattoid-store.lib.list-load-more"))),this.loading&&m("div",{class:"DiscussionList"},m("div",{class:"DiscussionList-loadMore"},m("div",{"aria-label":"loading…",role:"status","data-size":"medium",class:"LoadingIndicator-container LoadingIndicator-container--block LoadingIndicator-container--medium"},m("div",{"aria-hidden":"true",class:"LoadingIndicator"})))))},a.hasMoreResults=function(){return this.moreResults},a.loadMore=function(){this.loading=!0,this.loadResults(this.goodsList.length)},a.parseResults=function(t){return this.moreResults=!!t.payload.links&&!!t.payload.links.next,[].push.apply(this.goodsList,t.payload.data),this.loading=!1,m.redraw(),t},a.loadResults=function(t){return void 0===t&&(t=0),this.loading=!0,s().store.find("/store/goods",{filter:{},page:{offset:t}}).catch((function(){})).then(this.parseResults.bind(this))},i}(c());const k=flarum.core.compat.Component;var L=i.n(k),S=function(t){function i(){return t.apply(this,arguments)||this}o(i,t);var a=i.prototype;return a.oninit=function(s){t.prototype.oninit.call(this,s),this.type=this.attrs.title,this.storeData=this.attrs.storeData},a.className=function(){return"Modal--small"},a.title=function(){return s().translator.trans("mattoid-store.admin.settings.goods-item-"+this.type)},a.content=function(){var t=this;return m("div",{className:"Modal-body"},m("div",{className:"Form-group",style:"text-align: center;"},g().component({className:"Button Button--primary",type:"submit",loading:this.loading},s().translator.trans("mattoid-store.lib.confirm"))," ",g().component({className:"Button storeButton--gray",loading:this.loading,onclick:function(){t.hide()}},s().translator.trans("mattoid-store.lib.cancel"))))},a.onsubmit=function(t){var i=this;t.preventDefault(),this.loading=!0;var a=this.storeData.status;this.storeData.status=Number(!this.storeData.status);var o="delete"===this.type?"DELETE":"PUT";s().request({method:o,url:s().forum.attribute("apiUrl")+"/store/goods",body:this.storeData}).then((function(){return location.reload()}),(function(t){i.loading=!1,i.storeData.status=a,i.handleErrors(t)}))},i}(p()),B=function(t){function i(){for(var s,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(s=t.call.apply(t,[this].concat(a))||this).storeData={},s}o(i,t);var a=i.prototype;return a.oninit=function(s){t.prototype.oninit.call(this,s),this.storeData=this.attrs.item.attributes},a.view=function(){var t=this,i=(s().forum.attribute("antoinefr-money.moneyname")||"[money]").replace("[money]",this.storeData.price),a=this.storeData;return m("div",{id:"goods"+this.storeData.id,className:"storeItemContainer"},m("div",{className:"leftAligned"},m("div",{className:"margin"},m("span",null,m(g(),{className:"Button Button--primary",onclick:function(){s().modal.show(w,{storeData:a})}},s().translator.trans("mattoid-store.admin.settings.goods-edit"))),m("span",{className:"margin"},m(g(),{className:"Button Button--danger",onclick:function(){s().modal.show(S,{storeData:a,title:"delete"})}},s().translator.trans("mattoid-store.admin.settings.goods-delete"))),m("span",{className:"margin"},m(g(),{className:"Button",onclick:function(){s().modal.show(S,{storeData:a,title:"status-"+t.storeData.status})}},0===this.storeData.status?s().translator.trans("mattoid-store.lib.item-status-1"):s().translator.trans("mattoid-store.lib.item-status-0")))),m("div",null,s().translator.trans("mattoid-store.lib.item-id"),": ",this.storeData.id," |  ",s().translator.trans("mattoid-store.lib.item-title"),": ",this.storeData.title),m("div",null,s().translator.trans("mattoid-store.lib.item-desc"),": ",this.storeData.desc),m("div",null,s().translator.trans("mattoid-store.lib.item-status"),": ",m("span",{className:0===this.storeData.status?"red":"green"},s().translator.trans("mattoid-store.lib.item-status-"+this.storeData.status))," | ",s().translator.trans("mattoid-store.lib.item-price"),": ",i," | ",s().translator.trans("mattoid-store.lib.item-stock"),": ",-99==this.storeData.stock?"无限":this.storeData.stock," | ",s().translator.trans("mattoid-store.lib.item-discount"),": ",this.storeData.discount?this.storeData.discount+" %":"无"," | ",s().translator.trans("mattoid-store.lib.item-discount_limit"),": ",this.storeData.discountLimit||0," ",{days:"天",hour:"小时",minute:"分钟",second:"秒"}[this.storeData.discountLimitUnit]),m("div",null,s().translator.trans("mattoid-store.lib.item-type"),": ",s().translator.trans("mattoid-store.lib.item-type-"+this.storeData.type)," | ",s().translator.trans("mattoid-store.lib.item-created-at"),": ",this.storeData.createdAt)),m("div",{className:"rightAligned icon-size"},m("img",{className:"icon-size",src:this.storeData.icon,style:this.storeData.icon&&".webm"===this.storeData.icon.slice(-5)?"display: none":""}),m("video",{autoplay:!0,loop:!0,muted:!0,playsinline:!0,className:"icon-size",style:this.storeData.icon&&".webm"===this.storeData.icon.slice(-5)?"":"display: none"},m("source",{src:this.storeData.icon,type:"video/webm"}))))},i}(L()),I=function(t){function i(){for(var s,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(s=t.call.apply(t,[this].concat(a))||this).storeList=[],s.moreResults=!1,s}o(i,t);var a=i.prototype;return a.oninit=function(s){t.prototype.oninit.call(this,s),this.status=f()("-1"),this.type=f()("-1"),this.loadResults()},a.content=function(){var t=this;return m("div",{className:"ExtensionPage-body"},m("div",{className:"ExtensionPage-settings FlarumBadgesPage"},m("div",{className:"container"},m("form",null,this.buildSettingComponent({type:"string",setting:"mattoid-store.storeName",label:s().translator.trans("mattoid-store.admin.settings.store-name"),placeholder:s().translator.trans("mattoid-store.admin.settings.store-name"),help:s().translator.trans("mattoid-store.admin.settings.store-name-requirement")}),this.buildSettingComponent({type:"string",setting:"mattoid-store.storeTimezone",label:s().translator.trans("mattoid-store.admin.settings.store-timezone"),placeholder:"Asia/Shanghai",help:s().translator.trans("mattoid-store.admin.settings.store-timezone-requirement")}),this.submitButton()),m("hr",null),this.buildSettingComponent((function(){return m(".Form-group",l().component({className:"Button",onclick:function(){s().modal.show(N)}},s().translator.trans("mattoid-store.admin.settings.add-store-goods")))}))),m("div",{className:"container"},m("div",{className:"spacing",style:"overflow: auto"},m("div",{style:"display: inline-block;"},m(D(),{value:this.status(),disabled:this.loading,options:{"-1":s().translator.trans("mattoid-store.lib.item-status-all"),1:s().translator.trans("mattoid-store.lib.item-status-up"),0:s().translator.trans("mattoid-store.lib.item-status-down")},buttonClassName:"Button",onchange:function(s){t.status(s),t.storeList=[],t.loadResults()}})),m("div",{style:" display: inline-block; margin-left: 26px;"},m(D(),{value:this.type(),disabled:this.loading,options:{"-1":s().translator.trans("mattoid-store.lib.item-type-all"),permanent:s().translator.trans("mattoid-store.lib.item-type-permanent"),limit:s().translator.trans("mattoid-store.lib.item-type-limit")},buttonClassName:"Button",onchange:function(s){t.type(s),t.storeList=[],t.loadResults()}}))),m("ul",{style:"padding:0px;list-style-type: none;"},this.storeList.map((function(t){return m("li",{style:"margin-top:5px;background: var(--body-bg);"},B.component({item:t}))}))),!this.loading&&0===this.storeList.length&&m("div",null,m("div",{style:"font-size:1.4em;color: var(--muted-more-color);text-align: center;line-height: 100px;"},s().translator.trans("mattoid-store.lib.list-empty"))),!this.loading&&this.hasMoreResults()&&m("div",{style:"text-align:center;padding:20px"},m(l(),{className:"Button Button--primary",disabled:this.loading,loading:this.loading,onclick:function(){return t.loadMore()}},s().translator.trans("mattoid-store.lib.list-load-more"))),this.loading&&m("div",{class:"DiscussionList"},m("div",{class:"DiscussionList-loadMore"},m("div",{"aria-label":"loading…",role:"status","data-size":"medium",class:"LoadingIndicator-container LoadingIndicator-container--block LoadingIndicator-container--medium"},m("div",{"aria-hidden":"true",class:"LoadingIndicator"})))))))},a.hasMoreResults=function(){return this.moreResults},a.loadMore=function(){this.loading=!0,this.loadResults(this.storeList.length)},a.parseResults=function(t){return this.moreResults=!!t.payload.links&&!!t.payload.links.next,[].push.apply(this.storeList,t.payload.data),this.loading=!1,m.redraw(),t},a.loadResults=function(t){void 0===t&&(t=0),this.loading=!0;var i={type:this.type(),status:this.status()};return s().store.find("/store/list",{filter:i,page:{offset:t}}).catch((function(){})).then(this.parseResults.bind(this))},i}(n());s().initializers.add("mattoid-store",(function(){s().extensionData.for("mattoid-store").registerPage(I).registerPermission({icon:"fas fa-id-card",label:s().translator.trans("mattoid-store.admin.settings.group-view"),permission:"mattoid-store.group-view",allowGuest:!0},"view").registerPermission({icon:"fas fa-id-card",label:s().translator.trans("mattoid-store.admin.settings.group-view"),permission:"mattoid-store.group-moderate",allowGuest:!0},"moderate")}))})(),module.exports={}})();
//# sourceMappingURL=admin.js.map