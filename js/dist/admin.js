/*! For license information please see admin.js.LICENSE.txt */
(()=>{var t={535:t=>{"use strict";var e=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach((function(t){o[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(t){return!1}}()?Object.assign:function(t,s){for(var a,n,r=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),l=1;l<arguments.length;l++){for(var m in a=Object(arguments[l]))i.call(a,m)&&(r[m]=a[m]);if(e){n=e(a);for(var d=0;d<n.length;d++)o.call(a,n[d])&&(r[n[d]]=a[n[d]])}}return r}},488:(t,e,i)=>{"use strict";var o=i(535),s="function"==typeof Symbol&&Symbol.for;s&&Symbol.for("react.element"),s&&Symbol.for("react.portal"),s&&Symbol.for("react.fragment"),s&&Symbol.for("react.strict_mode"),s&&Symbol.for("react.profiler"),s&&Symbol.for("react.provider"),s&&Symbol.for("react.context"),s&&Symbol.for("react.forward_ref"),s&&Symbol.for("react.suspense"),s&&Symbol.for("react.memo"),s&&Symbol.for("react.lazy"),"function"==typeof Symbol&&Symbol.iterator;function a(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},r={};function l(t,e,i){this.props=t,this.context=e,this.refs=r,this.updater=i||n}function m(){}function d(t,e,i){this.props=t,this.context=e,this.refs=r,this.updater=i||n}l.prototype.isReactComponent={},l.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error(a(85));this.updater.enqueueSetState(this,t,e,"setState")},l.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},m.prototype=l.prototype;var c=d.prototype=new m;c.constructor=d,o(c,l.prototype),c.isPureReactComponent=!0;Object.prototype.hasOwnProperty},684:(t,e,i)=>{"use strict";i(488)}},e={};function i(o){var s=e[o];if(void 0!==s)return s.exports;var a=e[o]={exports:{}};return t[o](a,a.exports,i),a.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var o in e)i.o(e,o)&&!i.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var o={};(()=>{"use strict";i.r(o);const t=flarum.core.compat["admin/app"];var e=i.n(t);function s(t,e){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},s(t,e)}function a(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,s(t,e)}const n=flarum.core.compat["admin/components/ExtensionPage"];var r=i.n(n);const l=flarum.core.compat["common/components/Button"];var d=i.n(l);const c=flarum.core.compat["common/components/Modal"];var p=i.n(c);i(684);const u=flarum.core.compat["common/components/Switch"];var y=i.n(u);const h=flarum.core.compat["common/components/Select"];var f=i.n(h);const g=flarum.core.compat["common/utils/Stream"];var b=i.n(g),v=function(t){function i(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))||this).params={status:1,code:b()(),title:b()(),desc:b()(),price:b()(),stock:b()(),discount:b()(),limit:b()(),limitUnit:"day",type:"permanent",outtime:b()(),icon:b()(),hide:0},e}a(i,t),i.initAttrs=function(e){t.initAttrs.call(this,e)};var o=i.prototype;return o.oninit=function(e){t.prototype.oninit.call(this,e),this.params.code=b()(this.attrs.code||""),this.params.title=b()(this.attrs.title||"")},o.title=function(){return this.attrs.title},o.className=function(){return""},o.content=function(){var t=this;return m("form",null,m("div",{className:"Modal-body DecorationStoreModalBody"},m("div",{className:"Form"},m("div",{className:"Form-group"},m("div",{style:"text-align: left;"},m("div",{class:"decorationStoreSettingsLabel",style:"display: flex; align-items: center;"},m("span",null,e().translator.trans("mattoid-store.admin.settings.commodity-status")),m("span",{style:"margin-left: 15px;"},m(y(),{state:this.params.status,onchange:function(e){t.params.status=e}}," "))),m("div",{class:"decorationStoreSettingsLabel",style:"display: flex; align-items: center;"},m("span",null,e().translator.trans("mattoid-store.admin.settings.commodity-code")),m("span",{style:"font-weight: normal; cursor: pointer; border-bottom: 2px dotted; margin-left: 15px;"}," ",this.attrs.code," ")),m("div",{class:"decorationStoreSettingsLabel",style:"align-items: center;"},m("div",{className:"decorationStoreSettingsLabel"},e().translator.trans("mattoid-store.admin.settings.commodity-title")),m("input",{required:!0,class:"FormControl",type:"text",bidi:this.params.title})),m("div",{class:"decorationStoreSettingsLabel",style:"align-items: center;"},m("div",{className:"decorationStoreSettingsLabel"},e().translator.trans("mattoid-store.admin.settings.commodity-desc")),m("textarea",{class:"FormControl",bidi:this.params.desc})),m("div",{className:"spacing"},m("div",{style:"width: 60px; display: inline-block;"},e().translator.trans("mattoid-store.admin.settings.commodity-price")),m("input",{required:!0,class:"FormControl",type:"number",step:"1",min:"0",style:"width: 195px; margin-left: 0px; display: inline-block;",bidi:this.params.price}),m("div",{style:"width: 60px; display: inline-block; margin-left: 26px;"},e().translator.trans("mattoid-store.admin.settings.commodity-stock")),m("input",{required:!0,class:"FormControl",type:"number",step:"1",min:"0",style:"width: 195px; margin-left: 0px; display: inline-block;",bidi:this.params.stock})),m("div",{className:"spacing"},m("div",{style:"width: 60px; display: inline-block;"},e().translator.trans("mattoid-store.admin.settings.commodity-discount")),m("input",{required:!0,class:"FormControl",type:"number",step:"1",min:"0",style:"width: 100px; margin-left: 0px; display: inline-block;",bidi:this.params.discount}),m("div",{style:"width: 60px; display: inline-block; margin-left: 26px;"},e().translator.trans("mattoid-store.admin.settings.commodity-discount-limit")),m("input",{required:!0,class:"FormControl",type:"number",step:"1",min:"0",style:"width: 145px; margin-left: 0px; display: inline-block;",bidi:this.params.limit}),m("div",{style:"width: 40px; display: inline-block; margin-left: 26px;"},e().translator.trans("mattoid-store.admin.settings.commodity-discount-limit-unit")),f().component({options:{day:e().translator.trans("mattoid-store.lib.item-limit-unit-day"),hour:e().translator.trans("mattoid-store.lib.item-limit-unit-hour"),minute:e().translator.trans("mattoid-store.lib.item-limit-unit-minute"),second:e().translator.trans("mattoid-store.lib.item-limit-unit-second")},value:this.params.limitUnit,onchange:function(e){t.params.limitUnit=e}})),m("div",{className:"spacing"},m("div",{style:"width: 60px; display: inline-block;"},e().translator.trans("mattoid-store.admin.settings.commodity-type")),f().component({options:{permanent:e().translator.trans("mattoid-store.lib.item-type-permanent"),limit:e().translator.trans("mattoid-store.lib.item-type-limit")},value:this.params.type,onchange:function(e){t.params.type=e}}),m("div",{style:"limit"===this.params.type?"display:inline-block":"display: none"},m("div",{style:"width: 80px; display: inline-block; margin-left: 26px;"},e().translator.trans("mattoid-store.admin.settings.commodity-outtime")),m("input",{required:!0,class:"FormControl",type:"number",style:"width: 200px; margin-left: 0px; display: inline-block;",bidi:this.params.outtime}),m("span",{style:"margin-left: 10px;"},"天"))),m("div",{className:"spacing"},m("div",{className:"decorationStoreSettingsLabel"},e().translator.trans("mattoid-store.admin.settings.commodity-icon")),m("div",{style:"position: relative;"},m("div",null,m("input",{id:"icon",required:!0,class:"FormControl",type:"text",bidi:this.params.icon})),m("div",{style:"margin-top: 5px;"},m(d(),{className:"Button Button--primary",onclick:function(){}},e().translator.trans("mattoid-store.admin.settings.commodity-upload-button"))))),m("div",{className:"spacing"},m(y(),{state:this.params.hide,onchange:function(e){t.params.hide=e}},e().translator.trans("mattoid-store.admin.settings.commodity-hide")))),m("div",{className:"spacing center"},m(d(),{className:"Button Button--primary",onclick:function(){t.loading=!0,t.addCommodity().then((function(e){t.hide()})).catch((function(){t.loading=!1,m.redraw()}))}},e().translator.trans("mattoid-store.admin.settings.add-store-commodity")))))))},o.addCommodity=function(){return e().request({method:"POST",url:e().forum.attribute("apiUrl")+"/store/commodity",body:this.params})},i}(p()),x=function(t){function i(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))||this).commodityList=[],e.moreResults=!1,e}a(i,t);var o=i.prototype;return o.oninit=function(e){t.prototype.oninit.call(this,e),this.loadResults()},o.title=function(){return e().translator.trans("mattoid-store.admin.settings.add-store-commodity")},o.className=function(){return""},o.content=function(){var t=this;return m("div",null,this.commodityList.map((function(t,i){return m("div",{className:"storeItemContainer",style:"margin: 10px"},m("div",{className:"ExtensionPage-body"},m("div",{className:"ExtensionPage-settings FlarumBadgesPage",style:"margin-top: 10px"},m("div",{className:"container"},m("span",{className:"leftAligned",style:"padding: 8px"},t.attributes.name),m(d(),{className:"Button rightAligned",onclick:function(){e().modal.show(v,{code:t.attributes.code,title:t.attributes.name})}},e().translator.trans("mattoid-store.admin.settings.add-store-commodity"))))))})),!this.loading&&0===this.commodityList.length&&m("div",null,m("div",{style:"font-size:1.4em;color: var(--muted-more-color);text-align: center;line-height: 100px;"},e().translator.trans("mattoid-store.lib.list-empty"))),!this.loading&&this.hasMoreResults()&&m("div",{style:"text-align:center;padding:20px"},m(d(),{className:"Button Button--primary",disabled:this.loading,loading:this.loading,onclick:function(){return t.loadMore()}},e().translator.trans("mattoid-store.lib.list-load-more"))))},o.hasMoreResults=function(){return this.moreResults},o.loadMore=function(){this.loading=!0,this.loadResults(this.commodityList.length)},o.parseResults=function(t){return this.moreResults=!!t.payload.links&&!!t.payload.links.next,[].push.apply(this.commodityList,t.payload.data),this.loading=!1,m.redraw(),t},o.loadResults=function(t){return void 0===t&&(t=0),e().store.find("/store/commodity",{filter:{},page:{offset:t}}).catch((function(){})).then(this.parseResults.bind(this))},i}(p());const S=flarum.core.compat.Component;var w=function(t){function i(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))||this).storeData={},e}a(i,t);var o=i.prototype;return o.oninit=function(e){t.prototype.oninit.call(this,e),this.storeData=this.attrs.item.attributes,this.storeData.id=this.attrs.item.id},o.view=function(){return m("div",{id:this.storeData.id,className:"storeItemContainer"},m("div",{className:"leftAligned"},m("div",null,e().translator.trans("mattoid-store.lib.item-id"),": ",this.storeData.id," |  ",e().translator.trans("mattoid-store.lib.item-title"),": ",this.storeData.title),m("div",null,e().translator.trans("mattoid-store.lib.item-desc"),": ",this.storeData.desc),m("div",null,e().translator.trans("mattoid-store.lib.item-status"),": ",m("span",{className:0===this.storeData.status?"red":"green"},e().translator.trans("mattoid-store.lib.item-status-"+this.storeData.status))," | ",e().translator.trans("mattoid-store.lib.item-price"),": ",this.storeData.price," | ",e().translator.trans("mattoid-store.lib.item-stock"),": ",this.storeData.stock," | ",e().translator.trans("mattoid-store.lib.item-discount"),": ",this.storeData.discount||"无"," | ",e().translator.trans("mattoid-store.lib.item-discount_limit"),": ",this.storeData.discountLimit||0," ",this.storeData.discountLimitUnit),m("div",null,e().translator.trans("mattoid-store.lib.item-type"),": ",e().translator.trans("mattoid-store.lib.item-type-"+this.storeData.type)," | ",e().translator.trans("mattoid-store.lib.item-created-at"),": ",this.storeData.createdAt)),m("div",{className:"rightAligned icon-size"},m("img",{src:this.storeData.icon})))},i}(i.n(S)()),N=function(t){function i(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))||this).storeList=[],e.moreResults=!1,e}a(i,t);var o=i.prototype;return o.oninit=function(e){t.prototype.oninit.call(this,e),this.status=b()("-1"),this.type=b()("-1"),this.loadResults()},o.content=function(){var t=this;return m("div",{className:"ExtensionPage-body"},m("div",{className:"ExtensionPage-settings FlarumBadgesPage"},m("div",{className:"container"},m("form",null,this.buildSettingComponent({type:"string",setting:"mattoid-store.storeName",label:e().translator.trans("mattoid-store.admin.settings.store-name"),placeholder:e().translator.trans("mattoid-store.admin.settings.store-name"),help:e().translator.trans("mattoid-store.admin.settings.store-name-requirement")}),this.buildSettingComponent({type:"string",setting:"mattoid-store.storeTimezone",label:e().translator.trans("mattoid-store.admin.settings.store-timezone"),placeholder:"Asia/Shanghai",help:e().translator.trans("mattoid-store.admin.settings.store-timezone-requirement")}),this.submitButton()),m("hr",null),this.buildSettingComponent((function(){return m(".Form-group",d().component({className:"Button",onclick:function(){e().modal.show(x)}},e().translator.trans("mattoid-store.admin.settings.add-store-commodity")))}))),m("div",{className:"container"},m("div",{className:"spacing",style:"overflow: auto"},m("div",{style:"display: inline-block;"},m(f(),{value:this.status(),disabled:this.loading,options:{"-1":e().translator.trans("mattoid-store.lib.item-status-all"),1:e().translator.trans("mattoid-store.lib.item-status-up"),0:e().translator.trans("mattoid-store.lib.item-status-down")},buttonClassName:"Button",onchange:function(e){t.status(e),t.storeList=[],t.loadResults()}})),m("div",{style:" display: inline-block; margin-left: 26px;"},m(f(),{value:this.type(),disabled:this.loading,options:{"-1":e().translator.trans("mattoid-store.lib.item-type-all"),permanent:e().translator.trans("mattoid-store.lib.item-type-permanent"),limit:e().translator.trans("mattoid-store.lib.item-type-limit")},buttonClassName:"Button",onchange:function(e){t.type(e),t.storeList=[],t.loadResults()}}))),m("ul",{style:"padding:0px;list-style-type: none;"},this.storeList.map((function(t){return m("li",{style:"margin-top:5px;background: var(--body-bg);"},w.component({item:t}))}))),!this.loading&&0===this.storeList.length&&m("div",null,m("div",{style:"font-size:1.4em;color: var(--muted-more-color);text-align: center;line-height: 100px;"},e().translator.trans("mattoid-store.lib.list-empty"))),!this.loading&&this.hasMoreResults()&&m("div",{style:"text-align:center;padding:20px"},m(d(),{className:"Button Button--primary",disabled:this.loading,loading:this.loading,onclick:function(){return t.loadMore()}},e().translator.trans("mattoid-store.lib.list-load-more"))))))},o.hasMoreResults=function(){return this.moreResults},o.loadMore=function(){this.loading=!0,this.loadResults(this.storeList.length)},o.parseResults=function(t){return this.moreResults=!!t.payload.links&&!!t.payload.links.next,[].push.apply(this.storeList,t.payload.data),this.loading=!1,m.redraw(),t},o.loadResults=function(t){void 0===t&&(t=0);var i={type:this.type(),status:this.status()};return e().store.find("/store/list",{filter:i,page:{offset:t}}).catch((function(){})).then(this.parseResults.bind(this))},i}(r());e().initializers.add("mattoid-store",(function(){e().extensionData.for("mattoid-store").registerPage(N).registerPermission({icon:"fas fa-id-card",label:e().translator.trans("mattoid-store.admin.settings.group-view"),permission:"mattoid-store.group-view",allowGuest:!0},"view")}))})(),module.exports=o})();
//# sourceMappingURL=admin.js.map