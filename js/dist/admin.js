/*! For license information please see admin.js.LICENSE.txt */
(()=>{var t={535:t=>{"use strict";var e=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},o=0;o<10;o++)e["_"+String.fromCharCode(o)]=o;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(t){n[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,i){for(var r,a,s=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),m=1;m<arguments.length;m++){for(var l in r=Object(arguments[m]))o.call(r,l)&&(s[l]=r[l]);if(e){a=e(r);for(var c=0;c<a.length;c++)n.call(r,a[c])&&(s[a[c]]=r[a[c]])}}return s}},488:(t,e,o)=>{"use strict";var n=o(535),i="function"==typeof Symbol&&Symbol.for;i&&Symbol.for("react.element"),i&&Symbol.for("react.portal"),i&&Symbol.for("react.fragment"),i&&Symbol.for("react.strict_mode"),i&&Symbol.for("react.profiler"),i&&Symbol.for("react.provider"),i&&Symbol.for("react.context"),i&&Symbol.for("react.forward_ref"),i&&Symbol.for("react.suspense"),i&&Symbol.for("react.memo"),i&&Symbol.for("react.lazy"),"function"==typeof Symbol&&Symbol.iterator;function r(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)e+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},s={};function m(t,e,o){this.props=t,this.context=e,this.refs=s,this.updater=o||a}function l(){}function c(t,e,o){this.props=t,this.context=e,this.refs=s,this.updater=o||a}m.prototype.isReactComponent={},m.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error(r(85));this.updater.enqueueSetState(this,t,e,"setState")},m.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},l.prototype=m.prototype;var d=c.prototype=new l;d.constructor=c,n(d,m.prototype),d.isPureReactComponent=!0;Object.prototype.hasOwnProperty},684:(t,e,o)=>{"use strict";o(488)}},e={};function o(n){var i=e[n];if(void 0!==i)return i.exports;var r=e[n]={exports:{}};return t[n](r,r.exports,o),r.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};(()=>{"use strict";o.r(n);const t=flarum.core.compat["admin/app"];var e=o.n(t);function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,i(t,e)}const a=flarum.core.compat["admin/components/ExtensionPage"];var s=o.n(a);const l=flarum.core.compat["common/components/Button"];var c=o.n(l);function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function p(t){var e=function(t,e){if("object"!=d(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,"string");if("object"!=d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==d(e)?e:String(e)}function u(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p(n.key),n)}}const y=flarum.core.compat["common/components/Modal"];var f=o.n(y);o(684);const g=flarum.core.compat["common/components/Switch"];var b=o.n(g);const h=flarum.core.compat["common/components/Select"];var v=o.n(h);const S=flarum.core.compat["common/utils/Stream"];var x=o.n(S),w=function(t){function o(){for(var e,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this).params={status:1,code:x()(),title:x()(),desc:x()(),price:x()(),stock:x()(),discount:x()(),limit:x()(),limitUnit:"day",type:"permanent",outtime:x()(),icon:x()(),hide:0},e}r(o,t),o.initAttrs=function(e){t.initAttrs.call(this,e)};var n=o.prototype;return n.oninit=function(e){t.prototype.oninit.call(this,e),this.params.code=x()(this.attrs.code||""),this.params.title=x()(this.attrs.title||"")},n.title=function(){return this.attrs.title},n.className=function(){return""},n.content=function(){var t=this;return m("form",null,m("div",{className:"Modal-body DecorationStoreModalBody"},m("div",{className:"Form"},m("div",{className:"Form-group"},m("div",{style:"text-align: left;"},m("div",{class:"decorationStoreSettingsLabel",style:"display: flex; align-items: center;"},m("span",null,e().translator.trans("mattoid-store.admin.settings.commodity-status")),m("span",{style:"margin-left: 15px;"},m(b(),{state:this.params.status,onchange:function(e){t.params.status=e}}," "))),m("div",{class:"decorationStoreSettingsLabel",style:"display: flex; align-items: center;"},m("span",null,e().translator.trans("mattoid-store.admin.settings.commodity-code"),"  "),m("span",{style:"font-weight: normal; cursor: pointer; border-bottom: 2px dotted;"}," ",this.attrs.code," ")),m("div",{class:"decorationStoreSettingsLabel",style:"align-items: center;"},m("div",{className:"decorationStoreSettingsLabel"},e().translator.trans("mattoid-store.admin.settings.commodity-title")),m("input",{required:!0,class:"FormControl",type:"text",bidi:this.params.title})),m("div",{class:"decorationStoreSettingsLabel",style:"align-items: center;"},m("div",{className:"decorationStoreSettingsLabel"},e().translator.trans("mattoid-store.admin.settings.commodity-desc")),m("textarea",{class:"FormControl",bidi:this.params.desc})),m("div",{className:"spacing"},m("div",{style:"width: 60px; display: inline-block;"},e().translator.trans("mattoid-store.admin.settings.commodity-price")),m("input",{required:!0,class:"FormControl",type:"number",step:"1",min:"0",style:"width: 195px; margin-left: 0px; display: inline-block;",bidi:this.params.price}),m("div",{style:"width: 60px; display: inline-block; margin-left: 26px;"},e().translator.trans("mattoid-store.admin.settings.commodity-stock")),m("input",{required:!0,class:"FormControl",type:"number",step:"1",min:"0",style:"width: 195px; margin-left: 0px; display: inline-block;",bidi:this.params.stock})),m("div",{className:"spacing"},m("div",{style:"width: 60px; display: inline-block;"},e().translator.trans("mattoid-store.admin.settings.commodity-discount")),m("input",{required:!0,class:"FormControl",type:"number",step:"1",min:"0",style:"width: 100px; margin-left: 0px; display: inline-block;",bidi:this.params.discount}),m("div",{style:"width: 60px; display: inline-block; margin-left: 26px;"},e().translator.trans("mattoid-store.admin.settings.commodity-discount-limit")),m("input",{required:!0,class:"FormControl",type:"number",step:"1",min:"0",style:"width: 145px; margin-left: 0px; display: inline-block;",bidi:this.params.limit}),m("div",{style:"width: 40px; display: inline-block; margin-left: 26px;"},e().translator.trans("mattoid-store.admin.settings.commodity-discount-limit-unit")),v().component({options:{day:"天",hour:"小时",minute:"分钟",second:"秒"},value:this.params.limitUnit,onchange:function(e){t.params.limitUnit=e}})),m("div",{className:"spacing"},m("div",{style:"width: 60px; display: inline-block;"},e().translator.trans("mattoid-store.admin.settings.commodity-type")),v().component({options:{permanent:"永久有效",limit:"限时有效"},value:this.params.type,onchange:function(e){t.params.type=e}}),m("div",{style:"limit"===this.params.type?"display:inline-block":"display: none"},m("div",{style:"width: 80px; display: inline-block; margin-left: 26px;"},e().translator.trans("mattoid-store.admin.settings.commodity-outtime")),m("input",{required:!0,class:"FormControl",type:"number",style:"width: 200px; margin-left: 0px; display: inline-block;",bidi:this.params.outtime}),m("span",{style:"margin-left: 10px;"},"天"))),m("div",{className:"spacing"},m("div",{className:"decorationStoreSettingsLabel"},e().translator.trans("mattoid-store.admin.settings.commodity-icon")),m("div",{style:"position: relative;"},m("div",null,m("input",{id:"icon",required:!0,class:"FormControl",type:"text",bidi:this.params.icon})),m("div",{style:"margin-top: 5px;"},m(c(),{className:"Button Button--primary",onclick:function(){}},e().translator.trans("mattoid-store.admin.settings.commodity-upload-button"))))),m("div",{className:"spacing"},m(b(),{state:this.params.hide,onchange:function(e){t.params.hide=e}},e().translator.trans("mattoid-store.admin.settings.commodity-hide")))),m("div",{className:"spacing center"},m(c(),{className:"Button Button--primary",onclick:function(){t.loading=!0,t.addCommodity().then((function(e){t.hide()})).catch((function(){t.loading=!1,m.redraw()}))}},e().translator.trans("mattoid-store.admin.settings.add-store-commodity")))))))},n.addCommodity=function(){return e().request({method:"POST",url:e().forum.attribute("apiUrl")+"/store/commodity",body:this.params})},o}(f()),O=function(t){function o(){for(var e,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this)._list=void 0,e}r(o,t);var n,i,a=o.prototype;return a.oninit=function(e){var o=this;t.prototype.oninit.call(this,e),this.request().then((function(t){o.list=t.data||[]}))},a.title=function(){return e().translator.trans("mattoid-store.admin.settings.add-store-commodity")},a.className=function(){return""},a.content=function(){return this.list&&0!=this.list.length?m("div",null,this.list.map((function(t,o){return m("div",{className:"ExtensionPage-body"},m("div",{className:"ExtensionPage-settings FlarumBadgesPage"},m("div",{className:"container"},m("span",null,t.attributes.name),m(c(),{className:"Button",onclick:function(){e().modal.show(w,{code:t.attributes.code,title:t.attributes.name})}},e().translator.trans("mattoid-store.admin.settings.add-store-commodity")))))}))):m("div",{className:"body"},m("span",{className:"text"},"暂无可用商品"))},a.request=function(){return e().request({method:"GET",url:e().forum.attribute("apiUrl")+"/store/commodity"})},n=o,(i=[{key:"list",get:function(){return this._list},set:function(t){this._list=t}}])&&u(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),o}(f()),j=function(t){function o(){return t.apply(this,arguments)||this}r(o,t);var n=o.prototype;return n.oninit=function(e){t.prototype.oninit.call(this,e)},n.content=function(){return m("div",{className:"ExtensionPage-body"},m("div",{className:"ExtensionPage-settings FlarumBadgesPage"},m("div",{className:"container"},m("form",null,this.buildSettingComponent({type:"string",setting:"mattoid-store.storeName",label:e().translator.trans("mattoid-store.admin.settings.store-name"),placeholder:e().translator.trans("mattoid-store.admin.settings.store-name"),help:e().translator.trans("mattoid-store.admin.settings.store-name-requirement")}),this.buildSettingComponent({type:"string",setting:"mattoid-store.decorationStoreTimezone",label:e().translator.trans("mattoid-store.admin.settings.decorationStoreTimezone"),placeholder:"Asia/Shanghai",help:e().translator.trans("mattoid-store.admin.settings.decorationStoreTimezone-requirement")}),this.submitButton()),m("hr",null),this.buildSettingComponent((function(){return m(".Form-group",c().component({className:"Button",onclick:function(){e().modal.show(O)}},e().translator.trans("mattoid-store.admin.settings.add-store-commodity")))})))))},o}(s());e().initializers.add("mattoid-store",(function(){e().extensionData.for("mattoid-store").registerPage(j).registerPermission({icon:"fas fa-id-card",label:e().translator.trans("mattoid-store.admin.settings.group-view"),permission:"mattoid-store.group-view",allowGuest:!0},"view")}))})(),module.exports=n})();
//# sourceMappingURL=admin.js.map